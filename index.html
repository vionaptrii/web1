<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Toko Cewek Stylish</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Outfit', sans-serif;
    }
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes bounceIn {
  0% { opacity: 0; transform: scale(0.7); }
  60% { opacity: 1; transform: scale(1.05); }
  100% { transform: scale(1); }
}
.animate-bounce-in {
  animation: bounceIn 0.4s ease-out;
}
    .struk {
      width: 58mm;
      background: white;
      padding: 1rem;
      font-family: monospace;
      border: 1px dashed #aaa;
      margin: 2rem auto;
    }
    .struk h2 {
      text-align: center;
      margin-bottom: 1rem;
    }
    .modal-bg {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 100;
}
.modal-content {
  background: white;
  border-radius: 1rem;
  padding: 2rem;
  width: 100%;
  max-width: 400px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  position: relative;
}
.modal-close {
  position: absolute;
  top: 0.5rem;
  right: 1rem;
  font-size: 1.2rem;
  color: #999;
  cursor: pointer;
}
.produk-gambar {
  width: 100%;
  height: 200px; /* Atau sesuai ukuran yang kamu inginkan */
  object-fit: cover; /* Agar gambar tidak terdistorsi */
}
  </style>
</head>
<body class="bg-pink-50 text-gray-800">

  <!-- header + Tombol Login/Daftar -->
  <header class="bg-pink-100 py-8 shadow-md relative">
    <div class="absolute top-4 right-6 space-x-2">
        <button onclick="bukaModal('modalLogin')" class="bg-pink-300 border border-pink-400 text-pink-600 px-4 py-2 rounded-lg hover:bg-pink-100 text-sm font-semibold">Login</button>
        <button onclick="bukaModal('modalDaftar')" class="bg-white border border-pink-400 text-pink-600 px-4 py-2 rounded-lg hover:bg-pink-100 text-sm font-semibold">Daftar</button>        
    </div>
    <div class="max-w-6xl mx-auto px-6 text-center">
      <h1 class="text-4xl font-bold text-pink-600 mb-2">üíñ Selamat Datang di TokoChic!</h1>
      <p class="text-lg text-pink-700">Temukan barang-barang cewek paling gemas dan stylish di sini ‚ú®</p>
    </div>
  </header>

  <!-- Register Pelanggan (Disembunyikan Awalnya) -->
  <section id="register" class="hidden px-6 py-10 bg-white rounded-xl max-w-md mx-auto mt-8 shadow-md">
    <h2 class="text-2xl font-bold text-pink-600 mb-4 text-center">Daftar Pelanggan Baru</h2>
    <form id="registerForm" class="space-y-4">
      <input type="text" id="nama" placeholder="Nama Lengkap" class="w-full px-4 py-2 border rounded-lg" required>
      <input type="text" id="username" placeholder="Username" class="w-full px-4 py-2 border rounded-lg" required>
      <input type="password" id="password" placeholder="Password" class="w-full px-4 py-2 border rounded-lg" required>
      <input type="text" id="whatsapp" placeholder="Nomor WhatsApp" class="w-full px-4 py-2 border rounded-lg" required>
      <button type="submit" class="w-full py-2 bg-pink-500 text-white rounded-lg font-semibold hover:bg-pink-600">Daftar</button>
    </form>
    <p id="registerError" class="text-red-500 mt-3 text-sm hidden"></p>
  </section>

  <!-- Login Form (disembunyikan awalnya) -->
<section id="login" class="hidden px-6 py-10 bg-white rounded-xl max-w-md mx-auto mt-8 shadow-md">
    <h2 class="text-2xl font-bold text-pink-600 mb-4 text-center">Login Pelanggan</h2>
    <form id="loginForm" class="space-y-4">
      <input type="text" id="loginUsername" placeholder="Username" class="w-full px-4 py-2 border rounded-lg" required>
      <input type="password" id="loginPassword" placeholder="Password" class="w-full px-4 py-2 border rounded-lg" required>
      <button type="submit" class="w-full py-2 bg-pink-500 text-white rounded-lg font-semibold hover:bg-pink-600">Login</button>
    </form>
    <p id="loginError" class="text-red-500 mt-3 text-sm hidden"></p>
  </section>  

  <!-- Modal Daftar -->
<div id="modalDaftar" class="modal-bg">
    <div class="modal-content">
      <button onclick="tutupModalBeli()" class="absolute top-2 right-2 text-gray-400 hover:text-gray-700">‚úñ</button>
      <h2 class="text-2xl font-bold text-pink-600 mb-4 text-center">Daftar Pelanggan Baru</h2>
      <form id="registerForm" class="space-y-4">
        <input type="text" id="nama" placeholder="Nama Lengkap" class="w-full px-4 py-2 border rounded-lg" required>
        <input type="text" id="username" placeholder="Username" class="w-full px-4 py-2 border rounded-lg" required>
        <input type="password" id="password" placeholder="Password" class="w-full px-4 py-2 border rounded-lg" required>
        <input type="text" id="whatsapp" placeholder="Nomor WhatsApp" class="w-full px-4 py-2 border rounded-lg" required>
        <button type="submit" class="w-full py-2 bg-pink-500 text-white rounded-lg font-semibold hover:bg-pink-600">Daftar</button>
      </form>
      <p id="registerError" class="text-red-500 mt-3 text-sm hidden"></p>
    </div>
  </div>
  
  <!-- Modal Login -->
  <div id="modalLogin" class="modal-bg">
    <div class="modal-content">
      <button onclick="tutupModalBeli()" class="absolute top-2 right-2 text-gray-400 hover:text-gray-700">‚úñ</button>
      <h2 class="text-2xl font-bold text-pink-600 mb-4 text-center">Login Pelanggan</h2>
      <form id="loginForm" class="space-y-4">
        <input type="text" id="loginUsername" placeholder="Username" class="w-full px-4 py-2 border rounded-lg" required>
        <input type="password" id="loginPassword" placeholder="Password" class="w-full px-4 py-2 border rounded-lg" required>
        <button type="submit" class="w-full py-2 bg-pink-500 text-white rounded-lg font-semibold hover:bg-pink-600">Login</button>
      </form>
      <p id="loginError" class="text-red-500 mt-3 text-sm hidden"></p>
    </div>
  </div>  

  <!-- Produk -->
  <section class="px-6 py-8">
    <h2 class="text-2xl font-bold text-center text-pink-600 mb-6">‚ú® Produk Tersedia</h2>
    <div class="flex flex-col md:flex-row items-center justify-between gap-4 mb-6">
        <input type="text" id="searchInput" placeholder="Cari produk..." class="px-4 py-2 border rounded-lg w-full md:w-1/2" oninput="filterProduk()">
      
        <select id="sortSelect" onchange="filterProduk()" class="px-4 py-2 border rounded-lg w-full md:w-1/3">
          <option value="">Urutkan</option>
          <option value="harga-asc">Harga Termurah</option>
          <option value="harga-desc">Harga Termahal</option>
          <option value="nama-asc">Nama A-Z</option>
          <option value="nama-desc">Nama Z-A</option>
          <option value="stok-desc">Stok Terbanyak</option>
        </select>
      </div>      
    <div id="produkContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </section>

  <!-- Modal Keranjang Belanja -->
  <div id="keranjangModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-xl p-6 w-full max-w-md relative">
      <button onclick="toggleKeranjang()" class="absolute top-2 right-2 text-gray-400 hover:text-gray-700">‚úñ</button>
      <h2 class="text-xl font-bold text-pink-600 mb-4">üõçÔ∏è Keranjang Belanja</h2>
      <div id="keranjangIsi"></div>
      <p class="mt-4 font-semibold text-right">Total: <span id="totalHarga" class="text-pink-600">Rp 0</span></p>
    </div>
  </div>

  <!-- Struk Belanja -->
  <section class="py-10 px-4 bg-white mt-8">
    <h2 class="text-2xl font-bold text-center text-pink-600 mb-4">üßæ Struk Belanja</h2>
    <div class="struk">
      <h2>TokoChic</h2>
      <p>Tanggal: 08/04/2025</p>
      <hr class="my-2"/>
      <div>
        <p>Tas Selempang Pink x2 ........ Rp 240.000</p>
        <p>Skincare GlowUp x3 .......... Rp 255.000</p>
        <p>Kalung Bunga x4 ............. Rp 160.000</p>
      </div>
      <hr class="my-2"/>
      <p>Total ......................... <strong>Rp 655.000</strong></p>
      <p>Bayar Tunai ................. Rp 700.000</p>
      <p>Kembali ...................... Rp 45.000</p>
      <hr class="my-2"/>
      <p class="text-center">Terima kasih üíñ</p>
    </div>
  </section>

  <!-- Tombol Keranjang Sticky -->
  <div class="fixed bottom-4 right-4 z-50">
    <button onclick="toggleKeranjang()" id="floatingCartBtn" class="bg-pink-500 text-white rounded-full p-4 shadow-lg text-xl hover:scale-110 transition">üõçÔ∏è</button>
  </div>

  <!-- Modal Konfirmasi Beli Sekarang -->
<div id="modalBeli" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded-xl shadow-lg text-center max-w-sm w-full animate-bounce-in">
      <h2 class="text-xl font-bold text-pink-600 mb-2">Pembelian Berhasil!</h2>
      <p class="text-gray-600 mb-4">Terima kasih sudah membeli <span id="produkDibeli" class="font-semibold text-pink-500"></span> üíñ</p>
      <button onclick="tutupModalBeli()" class="bg-pink-500 text-white px-4 py-2 rounded-lg hover:bg-pink-600">Oke!</button>
    </div>
  </div>
  
  <!-- Script -->
  <script>
    const produkList = [
      { gambar: 'img/tas-pink.jpg', nama: 'Tas Selempang Pink', harga: 120000, stok: 3 },
      { gambar: 'img/skincare-glowup.jpg', nama: 'Skincare GlowUp Satu Paket', harga: 135000, stok: 0 },
      { gambar: 'img/kalung-bunga.jpg' ,nama: 'Kalung Bunga', harga: 40000, stok: 5 },
      { gambar: 'img/lip-gloss.jpg', nama: 'Lip Gloss Ceria', harga: 35000, stok: 1 },
      { gambar: 'img/bando-kawai.jpg', nama: 'Bando Kawai', harga: 25000, stok: 10 },
      { gambar: 'img/kacamata-vintage.jpg', nama: 'Kacamata Vintage', harga: 75000, stok: 7 },
      { gambar: 'img/outer-rajut.jpg', nama: 'Outer Rajut Cream', harga: 80000, stok: 4 },
      { gambar: 'img/sneakers-pinky.jpg', nama: 'Sneakers PinkyPop', harga: 150000, stok: 6 },
      { gambar: 'img/topi-bucket.jpg', nama: 'Topi Bucket', harga: 55000, stok: 3 },
      { gambar: 'img/anting-bintang.jpg', nama: 'Anting Bintang Kecil', harga: 18000, stok: 15 },
      { gambar: 'img/dompet-panda.jpg', nama: 'Dompet Lucu Panda', harga: 30000, stok: 5 },
      { gambar: 'img/jam-tangan.jpg', nama: 'Jam Tangan', harga: 125000, stok: 2 },
      { gambar: 'img/scrunchie-daisy.jpg', nama: 'Scrunchie Daisy', harga: 15000, stok: 20 },
      { gambar: 'img/kaos-putih.jpg', nama: 'Kaos Oversize Putih', harga: 88000, stok: 8 }
    ];

    const keranjang = [];

    function renderProduk(list = produkList) {
      const container = document.getElementById('produkContainer');
      if (!container) return;
      container.innerHTML = '';
      list.forEach(item => {
        const card = document.createElement('div');
        const sudahAda = keranjang.find(k => k.nama === item.nama);

        let buttonHTML = '';
        if (item.stok === 0) {
          buttonHTML = `<button disabled class="mt-3 bg-gray-300 text-white w-full py-2 rounded-lg">Stok Habis</button>`;
        } else if (sudahAda) {
          buttonHTML = `<button disabled class="mt-3 bg-green-300 text-white w-full py-2 rounded-lg">Sudah di Keranjang</button>`;
        } else {
          buttonHTML = `
            <div class="flex gap-2 mt-3">
              <button onclick="addToCart('${item.nama}')" class="flex-1 bg-pink-500 hover:bg-pink-600 text-white py-2 rounded-lg">+ Keranjang</button>
              <button onclick="beliSekarang('${item.nama}')" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 rounded-lg">Beli Sekarang</button>
            </div>
          `;
        }

        card.className = 'bg-white p-4 rounded-xl shadow-md fade-in';
        card.innerHTML = `
          <img src="${item.gambar || 'img/default.jpg'}" alt="${item.nama}" class="mb-3 aspect-square object-cover rounded-xl ">
          <h3 class="text-lg font-semibold text-pink-600">${item.nama}</h3>
          <p class="text-sm text-gray-500">Stok: ${item.stok}</p>
          <p class="text-xl font-bold text-gray-700 mt-2">Rp ${item.harga.toLocaleString()}</p>
          ${buttonHTML}
        `;
        container.appendChild(card);
      });
    }

    function addToCart(namaProduk) {
      const item = produkList.find(p => p.nama === namaProduk);
      if (!item || item.stok <= 0) return;
      keranjang.push({ nama: item.nama, harga: item.harga, qty: 1 });
      item.stok -= 1;
      filterProduk();
    }

    function beliSekarang(namaProduk) {
      const item = produkList.find(p => p.nama === namaProduk);
      if (!item || item.stok <= 0) return;
      item.stok -= 1;
      filterProduk();
      const suara = document.getElementById('klikSuara');
  if (suara) suara.play();

  // Tampilkan modal
  const modal = document.getElementById('modalBeli');
  const teks = document.getElementById('produkDibeli');
  if (modal && teks) {
    teks.innerText = item.nama;
    modal.classList.remove('hidden');
  }

  renderProduk(produkList); // update tampilan stok
  }

    function toggleKeranjang() {
      const modal = document.getElementById('keranjangModal');
      const isi = document.getElementById('keranjangIsi');
      const total = document.getElementById('totalHarga');
      if (!modal || !isi || !total) return;

      if (modal.classList.contains('hidden')) {
        let html = '';
        let totalHarga = 0;
        keranjang.forEach(item => {
          const subtotal = item.harga * item.qty;
          totalHarga += subtotal;
          html += `<p>${item.nama} x${item.qty} = Rp ${subtotal.toLocaleString()}</p>`;
        });
        isi.innerHTML = html || '<p>Keranjang kosong</p>';
        total.innerText = 'Rp ' + totalHarga.toLocaleString();
        modal.classList.remove('hidden');
      } else {
        modal.classList.add('hidden');
      }
    }

    function showRegister() {
      const section = document.getElementById('register');
      modal.classList.remove('hidden');
      }

    filterProduk();

    const registerForm = document.getElementById('registerForm');
    const errorMsg = document.getElementById('registerError');

    registerForm.addEventListener('submit', function(e) {
      e.preventDefault();
      errorMsg.classList.add('hidden');

      const nama = document.getElementById('nama').value.trim();
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      const whatsapp = document.getElementById('whatsapp').value.trim();

      const properCase = /^[A-Za-z ]+$/;
      const usernamePattern = /^[a-z0-9]{3,20}$/;
      const passwordPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,20}$/;
      const waPattern = /^628[0-9]{8,11}$/;

      if (!properCase.test(nama)) {
        return showError("Nama hanya huruf dan spasi, wajib proper case.");
      }
      if (!usernamePattern.test(username)) {
        return showError("Username hanya huruf kecil dan angka (3-20 karakter).");
      }
      if (!passwordPattern.test(password)) {
        return showError("Password wajib 6-20 karakter, ada huruf besar, kecil, dan angka.");
      }
      if (!waPattern.test(whatsapp)) {
        return showError("Nomor WhatsApp harus diawali 628 dan 11-14 digit.");
      }

      alert("Registrasi berhasil! Selamat datang, " + nama);
      registerForm.reset();
    });

    function showError(msg) {
      errorMsg.textContent = msg;
      errorMsg.classList.remove('hidden');
    }
    function showLogin() {
  document.getElementById('login').classList.remove('hidden');
  document.getElementById('login').scrollIntoView({ behavior: 'smooth' });
}

const loginForm = document.getElementById('loginForm');
const loginError = document.getElementById('loginError');

loginForm.addEventListener('submit', function (e) {
  e.preventDefault();
  loginError.classList.add('hidden');

  const username = document.getElementById('loginUsername').value.trim();
  const password = document.getElementById('loginPassword').value.trim();

  const savedUsers = JSON.parse(localStorage.getItem('users') || '[]');
  const found = savedUsers.find(u => u.username === username && u.password === password);

  if (!found) {
    loginError.textContent = 'Username atau password salah.';
    loginError.classList.remove('hidden');
    return;
  }

  sessionStorage.setItem('loginUser', JSON.stringify(found));
  alert('Login berhasil! Selamat datang, ' + found.nama);
  document.getElementById('login').classList.add('hidden');
});

function bukaModal(id) {
  document.getElementById(id).style.display = 'flex';
}
function tutupModalBeli() {
  // Menutup modal atau menjalankan aksi lainnya
  console.log("Modal ditutup!");
  document.getElementById("modalBeli").style.display = "none"; // Contoh untuk menyembunyikan modal
}

function filterProduk() {
  const keyword = document.getElementById('searchInput').value.toLowerCase();
  const sort = document.getElementById('sortSelect').value;

  let hasil = produkList.filter(p => p.nama.toLowerCase().includes(keyword));

  switch (sort) {
    case 'harga-asc':
      hasil.sort((a, b) => a.harga - b.harga);
      break;
    case 'harga-desc':
      hasil.sort((a, b) => b.harga - a.harga);
      break;
    case 'nama-asc':
      hasil.sort((a, b) => a.nama.localeCompare(b.nama));
      break;
    case 'nama-desc':
      hasil.sort((a, b) => b.nama.localeCompare(a.nama));
      break;
    case 'stok-desc':
      hasil.sort((a, b) => b.stok - a.stok);
      break;
  }

  renderProduk(hasil);
}
  </script>
</body>
</html>